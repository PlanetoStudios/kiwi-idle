<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Kiwi Idle</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="manifest" href="manifest.json">

<style>
body {
  font-family: system-ui, Arial;
  background: #0f172a;
  color: #e5e7eb;
  text-align: center;
  padding: 30px;
}

button {
  background: #22c55e;
  border: none;
  border-radius: 12px;
  padding: 14px 20px;
  font-size: 16px;
  margin: 10px;
  cursor: pointer;
}

button:active {
  transform: scale(0.96);
}
</style>
</head>

<body>

<h1>ü•ù Kiwi Idle</h1>

<div id="kiwis">0 kiwis</div>
<div id="perSecond">0 / segundo</div>

<button id="click">Clique no Kiwi</button>

<h2>Upgrade</h2>
<button id="upgrade">
+1 Kiwi/s<br>
Custo: <span id="cost">10</span>
</button>

<script>
let kiwis = 0;
let perSecond = 0;
let upgradeCost = 10;

// UI
const kiwisEl = document.getElementById("kiwis");
const perSecondEl = document.getElementById("perSecond");
const costEl = document.getElementById("cost");

function updateUI() {
  kiwisEl.textContent = Math.floor(kiwis) + " kiwis";
  perSecondEl.textContent = perSecond + " / segundo";
  costEl.textContent = upgradeCost;
}

// Clique
document.getElementById("click").onclick = () => {
  kiwis++;
  updateUI();
};

// Upgrade
document.getElementById("upgrade").onclick = () => {
  if (kiwis >= upgradeCost) {
    kiwis -= upgradeCost;
    perSecond++;
    upgradeCost = Math.floor(upgradeCost * 1.6);
    saveGame();
    updateUI();
  }
};

// Produ√ß√£o autom√°tica
setInterval(() => {
  kiwis += perSecond;
  updateUI();
}, 1000);

// Salvar
function saveGame() {
  localStorage.setItem("kiwiSave", JSON.stringify({
    kiwis,
    perSecond,
    upgradeCost,
    lastTime: Date.now()
  }));
}

// Carregar + offline
function loadGame() {
  const save = JSON.parse(localStorage.getItem("kiwiSave"));
  if (!save) return;

  kiwis = save.kiwis;
  perSecond = save.perSecond;
  upgradeCost = save.upgradeCost;

  const diff = Math.floor((Date.now() - save.lastTime) / 1000);
  kiwis += diff * perSecond;
}

window.onload = () => {
  loadGame();
  updateUI();
};

// Auto-save
setInterval(saveGame, 5000);

// Service Worker
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
