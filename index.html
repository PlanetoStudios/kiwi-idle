<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Kiwi Idle</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="manifest" href="manifest.json">

<style>
/* ================= VISUAL ================= */
:root{
  --green:#22c55e;
  --dark:#020617;
  --panel:rgba(15,23,42,.85);
}

*{box-sizing:border-box}

body{
  margin:0;
  min-height:100vh;
  font-family:system-ui,Arial;
  background:
    radial-gradient(circle at top,#16a34a,#022c22 70%);
  color:#ecfdf5;
  display:flex;
  justify-content:center;
  align-items:center;
}

.app{
  width:360px;
  background:var(--panel);
  border-radius:24px;
  padding:18px;
  box-shadow:0 0 60px rgba(34,197,94,.4);
}

h1{
  margin:0 0 10px;
  text-align:center;
}

.stat{
  text-align:center;
  margin:6px 0;
  font-size:22px;
}

.small{
  opacity:.7;
  font-size:14px;
}

button{
  width:100%;
  border:none;
  border-radius:16px;
  padding:14px;
  margin:6px 0;
  font-size:15px;
  font-weight:600;
  cursor:pointer;
  background:linear-gradient(135deg,#22c55e,#4ade80);
  color:#022c22;
}

button:active{transform:scale(.96)}

.section{
  margin-top:14px;
  padding-top:10px;
  border-top:1px solid rgba(255,255,255,.1);
}

.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:6px;
}

.achievement{
  background:rgba(255,255,255,.08);
  padding:8px;
  border-radius:10px;
  font-size:12px;
}

.locked{opacity:.4}

/* calculadora */
.calc{
  background:rgba(0,0,0,.4);
  padding:10px;
  border-radius:12px;
  font-size:13px;
  margin-top:6px;
}
</style>
</head>

<body>
<div class="app">

<h1>ü•ù Kiwi Idle</h1>

<div class="stat" id="kiwis">0 kiwis</div>
<div class="stat small" id="ps">0 / segundo</div>

<button id="click">CLICAR NO KIWI</button>

<div class="section">
  <strong>Produ√ß√£o</strong>
  <button onclick="buy(0)">üå± Planta√ß√£o (+1/s)<br>Custo: <span id="c0"></span></button>
  <button onclick="buy(1)">üè≠ F√°brica (+5/s)<br>Custo: <span id="c1"></span></button>
  <button onclick="buy(2)">üö¢ Exporta√ß√£o (+25/s)<br>Custo: <span id="c2"></span></button>
</div>

<div class="section">
  <strong>Calculadora</strong>
  <div class="calc" id="calc"></div>
</div>

<div class="section">
  <strong>Prest√≠gio</strong>
  <button onclick="prestige()">‚ú® Resetar para b√¥nus permanente</button>
</div>

<div class="section">
  <strong>Conquistas</strong>
  <div class="grid" id="achievements"></div>
</div>

</div>

<script>
/* ================= DADOS ================= */
let game={
  kiwis:0,
  perSecond:0,
  bonus:1,
  upgrades:[
    {base:10, gain:1},
    {base:100, gain:5},
    {base:1000, gain:25}
  ],
  owned:[0,0,0],
  achievements:{},
  last:Date.now()
};

const ACHIEVEMENTS=[
  {id:"k10", name:"10 kiwis", check:()=>game.kiwis>=10},
  {id:"k100", name:"100 kiwis", check:()=>game.kiwis>=100},
  {id:"ps50", name:"50/s", check:()=>game.perSecond>=50},
  {id:"prestige", name:"Primeiro prest√≠gio", check:()=>game.bonus>1}
];

/* ================= UI ================= */
const kiwisEl=kiwis;
const psEl=ps;
const calcEl=calc;
const achEl=achievements;

function cost(i){
  return Math.floor(game.upgrades[i].base*Math.pow(1.7,game.owned[i]));
}

function updateUI(){
  kiwisEl.textContent=Math.floor(game.kiwis)+" kiwis";
  psEl.textContent=(game.perSecond*game.bonus).toFixed(1)+" / segundo";

  game.upgrades.forEach((u,i)=>{
    document.getElementById("c"+i).textContent=cost(i);
  });

  // calculadora
  calcEl.innerHTML=
    `1 min: ${(game.perSecond*60*game.bonus).toFixed(0)}<br>
     1 hora: ${(game.perSecond*3600*game.bonus).toFixed(0)}<br>
     1 dia: ${(game.perSecond*86400*game.bonus).toFixed(0)}`;

  // conquistas
  achEl.innerHTML="";
  ACHIEVEMENTS.forEach(a=>{
    if(a.check()) game.achievements[a.id]=true;
    const div=document.createElement("div");
    div.className="achievement"+(game.achievements[a.id]?"":" locked");
    div.textContent=a.name;
    achEl.appendChild(div);
  });
}

/* ================= SISTEMAS ================= */
click.onclick=()=>{
  game.kiwis+=1*game.bonus;
  updateUI();
};

function buy(i){
  let c=cost(i);
  if(game.kiwis>=c){
    game.kiwis-=c;
    game.owned[i]++;
    game.perSecond+=game.upgrades[i].gain;
    save();
    updateUI();
  }
}

function prestige(){
  if(game.kiwis>=10000){
    game.bonus+=0.5;
    game.kiwis=0;
    game.perSecond=0;
    game.owned=[0,0,0];
    save();
    updateUI();
  }
}

/* ================= LOOP ================= */
setInterval(()=>{
  game.kiwis+=game.perSecond*game.bonus;
  updateUI();
},1000);

/* ================= SAVE ================= */
function save(){
  game.last=Date.now();
  localStorage.setItem("kiwiSave",JSON.stringify(game));
}

function load(){
  let s=JSON.parse(localStorage.getItem("kiwiSave"));
  if(!s) return;
  Object.assign(game,s);
  let diff=Math.floor((Date.now()-game.last)/1000);
  game.kiwis+=diff*game.perSecond*game.bonus;
}

load();
updateUI();
setInterval(save,5000);

/* ================= PWA ================= */
if("serviceWorker"in navigator){
  navigator.serviceWorker.register("sw.js");
}
</script>
</body>
</html>
