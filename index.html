<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Kiwi Idle</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="manifest" href="manifest.json">

<style>
body {
  margin: 0;
  font-family: system-ui, Arial;
  background: linear-gradient(135deg, #052e16, #14532d, #022c22);
  background-size: 300% 300%;
  animation: bg 12s ease infinite;
  color: #ecfdf5;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
}

@keyframes bg {
  0% {background-position: 0% 50%;}
  50% {background-position: 100% 50%;}
  100% {background-position: 0% 50%;}
}

.game {
  width: 320px;
  background: rgba(0,0,0,0.45);
  backdrop-filter: blur(10px);
  border-radius: 20px;
  padding: 20px;
  box-shadow: 0 0 40px rgba(34,197,94,.4);
}

h1 {
  margin-top: 0;
}

.counter {
  font-size: 28px;
  margin: 10px 0;
}

.persec {
  opacity: .8;
  margin-bottom: 15px;
}

button {
  width: 100%;
  padding: 14px;
  margin: 8px 0;
  border-radius: 14px;
  border: none;
  font-size: 16px;
  background: linear-gradient(135deg, #22c55e, #4ade80);
  color: #052e16;
  font-weight: bold;
  cursor: pointer;
  transition: transform .1s, box-shadow .1s;
}

button:active {
  transform: scale(.96);
  box-shadow: 0 0 20px #22c55e;
}

.section {
  margin-top: 20px;
  border-top: 1px solid rgba(255,255,255,.1);
  padding-top: 15px;
}
</style>
</head>

<body>

<div class="game">
  <h1>ü•ù Kiwi Idle</h1>

  <div class="counter" id="kiwis">0 kiwis</div>
  <div class="persec" id="ps">0 / segundo</div>

  <button id="click">Clique no Kiwi</button>

  <div class="section">
    <button id="upgrade1">üå± Planta√ß√£o (+1/s)<br>Custo: <span id="c1">10</span></button>
    <button id="upgrade2">üè≠ F√°brica (+5/s)<br>Custo: <span id="c2">100</span></button>
    <button id="upgrade3">üöÄ Exporta√ß√£o (+25/s)<br>Custo: <span id="c3">1000</span></button>
  </div>

  <div class="section">
    <button id="prestige">‚ú® Prest√≠gio<br>B√¥nus: <span id="bonus">1.0x</span></button>
  </div>
</div>

<script>
let kiwis = 0;
let perSecond = 0;
let bonus = 1;

let costs = {
  u1: 10,
  u2: 100,
  u3: 1000
};

const kiwisEl = document.getElementById("kiwis");
const psEl = document.getElementById("ps");

function updateUI() {
  kiwisEl.textContent = Math.floor(kiwis) + " kiwis";
  psEl.textContent = (perSecond * bonus).toFixed(1) + " / segundo";
  c1.textContent = costs.u1;
  c2.textContent = costs.u2;
  c3.textContent = costs.u3;
  bonusEl.textContent = bonus.toFixed(1) + "x";
}

click.onclick = () => {
  kiwis += 1 * bonus;
  updateUI();
};

upgrade1.onclick = () => buy("u1", 1);
upgrade2.onclick = () => buy("u2", 5);
upgrade3.onclick = () => buy("u3", 25);

function buy(key, value) {
  if (kiwis >= costs[key]) {
    kiwis -= costs[key];
    perSecond += value;
    costs[key] = Math.floor(costs[key] * 1.7);
    save();
    updateUI();
  }
}

setInterval(() => {
  kiwis += perSecond * bonus;
  updateUI();
}, 1000);

// PREST√çGIO
prestige.onclick = () => {
  if (kiwis >= 10000) {
    bonus += 0.5;
    kiwis = 0;
    perSecond = 0;
    costs = {u1:10,u2:100,u3:1000};
    save();
    updateUI();
  }
};

// SAVE / LOAD
function save() {
  localStorage.setItem("kiwiSave", JSON.stringify({
    kiwis, perSecond, costs, bonus, last: Date.now()
  }));
}

function load() {
  const s = JSON.parse(localStorage.getItem("kiwiSave"));
  if (!s) return;
  kiwis = s.kiwis;
  perSecond = s.perSecond;
  costs = s.costs;
  bonus = s.bonus;

  const diff = Math.floor((Date.now() - s.last)/1000);
  kiwis += diff * perSecond * bonus;
}

load();
updateUI();
setInterval(save, 5000);

if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
