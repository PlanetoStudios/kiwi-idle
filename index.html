<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Kiwi Idle</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="manifest" href="manifest.json">

<style>
/* ================= TEMAS ================= */
:root{
  --bg1:#16a34a;
  --bg2:#022c22;
  --panel:rgba(15,23,42,.88);
  --accent:#22c55e;
}

[data-theme="gold"]{
  --bg1:#facc15;
  --bg2:#78350f;
  --accent:#f59e0b;
}

[data-theme="dark"]{
  --bg1:#020617;
  --bg2:#020617;
  --accent:#38bdf8;
}

*{box-sizing:border-box}

body{
  margin:0;
  min-height:100vh;
  font-family:system-ui;
  background:radial-gradient(circle at top,var(--bg1),var(--bg2) 70%);
  color:#ecfdf5;
  display:flex;
  justify-content:center;
  align-items:center;
}

.app{
  width:360px;
  background:var(--panel);
  border-radius:24px;
  padding:18px;
  box-shadow:0 0 60px rgba(0,0,0,.5);
}

h1{text-align:center;margin:0 0 6px}

.stat{text-align:center;font-size:22px}
.small{font-size:13px;opacity:.7}

button{
  width:100%;
  border:none;
  border-radius:16px;
  padding:14px;
  margin:6px 0;
  font-weight:700;
  background:linear-gradient(135deg,var(--accent),#4ade80);
  cursor:pointer;
}

button:active{transform:scale(.94)}

.section{
  margin-top:12px;
  padding-top:8px;
  border-top:1px solid rgba(255,255,255,.1);
}

.float{
  position:absolute;
  pointer-events:none;
  animation:float 1s ease-out forwards;
}

@keyframes float{
  from{opacity:1;transform:translateY(0)}
  to{opacity:0;transform:translateY(-40px)}
}

.bar{
  height:10px;
  background:#000;
  border-radius:10px;
  overflow:hidden;
}

.bar>div{
  height:100%;
  background:var(--accent);
}
</style>
</head>

<body data-theme="default">
<div class="app">

<h1>ğŸ¥ Kiwi Idle</h1>

<div class="stat" id="kiwis">0</div>
<div class="stat small" id="ps">0/s</div>

<div class="stat small">
  NÃ­vel <span id="level">1</span>
  <div class="bar"><div id="xpbar"></div></div>
</div>

<button id="click">CLICAR NO KIWI</button>

<div class="section">
  <strong>ProduÃ§Ã£o</strong>
  <button onclick="buy(0)">ğŸŒ± PlantaÃ§Ã£o</button>
  <button onclick="buy(1)">ğŸ­ FÃ¡brica</button>
  <button onclick="buy(2)">ğŸš¢ ExportaÃ§Ã£o</button>
</div>

<div class="section">
  <strong>MissÃ£o do Dia</strong>
  <div id="mission"></div>
</div>

<div class="section">
  <strong>Temas</strong>
  <button onclick="setTheme('default')">ğŸŒ¿ PadrÃ£o</button>
  <button onclick="setTheme('gold')">ğŸ¥‡ Dourado</button>
  <button onclick="setTheme('dark')">ğŸŒ‘ Escuro</button>
</div>

</div>

<script>
/* ================= DADOS ================= */
let game={
  kiwis:0,
  ps:0,
  bonus:1,
  level:1,
  xp:0,
  xpNeed:50,
  theme:"default",
  upgrades:[
    {base:10,gain:1},
    {base:100,gain:5},
    {base:1000,gain:25}
  ],
  owned:[0,0,0],
  mission:null,
  last:Date.now()
};

/* ================= UTIL ================= */
const kiwisEl=kiwis, psEl=ps, lvlEl=level, xpbar=xpbar;

function cost(i){
  return Math.floor(game.upgrades[i].base*Math.pow(1.6,game.owned[i]));
}

function totalBonus(){
  return game.bonus*(1+game.level*0.05);
}

/* ================= UI ================= */
function updateUI(){
  kiwisEl.textContent=Math.floor(game.kiwis)+" kiwis";
  psEl.textContent=(game.ps*totalBonus()).toFixed(1)+"/s";
  lvlEl.textContent=game.level;
  xpbar.style.width=(game.xp/game.xpNeed*100)+"%";
  mission.textContent=game.mission.text;
}

/* ================= SISTEMAS ================= */
click.onclick=e=>{
  let gain=1*totalBonus();
  game.kiwis+=gain;
  gainXP(1);
  floatText("+"+gain.toFixed(0),e.clientX,e.clientY);
};

function buy(i){
  let c=cost(i);
  if(game.kiwis>=c){
    game.kiwis-=c;
    game.owned[i]++;
    game.ps+=game.upgrades[i].gain;
    gainXP(5);
  }
}

function gainXP(v){
  game.xp+=v;
  if(game.xp>=game.xpNeed){
    game.xp-=game.xpNeed;
    game.level++;
    game.xpNeed=Math.floor(game.xpNeed*1.4);
  }
}

function floatText(t,x,y){
  let d=document.createElement("div");
  d.className="float";
  d.textContent=t;
  d.style.left=x+"px";
  d.style.top=y+"px";
  document.body.appendChild(d);
  setTimeout(()=>d.remove(),1000);
}

/* ================= MISSÃ•ES ================= */
function newMission(){
  game.mission={
    goal:100,
    progress:0,
    reward:200,
    text:"Produza 100 kiwis"
  };
}

setInterval(()=>{
  game.kiwis+=game.ps*totalBonus();
  game.mission.progress+=game.ps;
  if(game.mission.progress>=game.mission.goal){
    game.kiwis+=game.mission.reward;
    newMission();
  }
  updateUI();
},1000);

/* ================= TEMA ================= */
function setTheme(t){
  document.body.dataset.theme=t;
  game.theme=t;
}

/* ================= SAVE ================= */
function save(){
  game.last=Date.now();
  localStorage.setItem("kiwiSave",JSON.stringify(game));
}
function load(){
  let s=JSON.parse(localStorage.getItem("kiwiSave"));
  if(!s) return;
  Object.assign(game,s);
  document.body.dataset.theme=game.theme;
}
load();
newMission();
updateUI();
setInterval(save,5000);
</script>
</body>
</html>
